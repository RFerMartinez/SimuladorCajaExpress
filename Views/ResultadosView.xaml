<UserControl x:Class="CajaExpressSim.Views.ResultadosView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="500" d:DesignWidth="800" Background="White">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Text="Resultados de la Simulación" FontSize="24" FontWeight="Bold" Foreground="#333" Margin="0,0,0,20"/>

        <UniformGrid Grid.Row="1" Columns="3" Rows="2" Margin="0,0,0,20">

            <UniformGrid.Resources>
                <Style TargetType="Border">
                    <Setter Property="Background" Value="#F0F0F0"/>
                    <Setter Property="CornerRadius" Value="5"/>
                    <Setter Property="Margin" Value="5"/>
                    <Setter Property="Padding" Value="10"/>
                </Style>
                <Style TargetType="TextBlock" x:Key="Label">
                    <Setter Property="Foreground" Value="#666"/>
                    <Setter Property="FontSize" Value="12"/>
                </Style>
                <Style TargetType="TextBlock" x:Key="Value">
                    <Setter Property="FontSize" Value="20"/>
                    <Setter Property="FontWeight" Value="Bold"/>
                    <Setter Property="HorizontalAlignment" Value="Center"/>
                    <Setter Property="Margin" Value="0,5,0,0"/>
                </Style>
            </UniformGrid.Resources>

            <Border>
                <StackPanel>
                    <TextBlock Text="Total Clientes Atendidos" Style="{StaticResource Label}"/>
                    <TextBlock Text="{Binding TotalClientes}" Style="{StaticResource Value}" Foreground="#007ACC"/>
                </StackPanel>
            </Border>

            <Border>
                <StackPanel>
                    <TextBlock Text="Promedio en Sistema (W)" Style="{StaticResource Label}"/>
                    <TextBlock Text="{Binding PromedioSistema, StringFormat=N2}" Style="{StaticResource Value}"/>
                </StackPanel>
            </Border>

            <Border>
                <StackPanel>
                    <TextBlock Text="Promedio en Cola (Wq)" Style="{StaticResource Label}"/>
                    <TextBlock Text="{Binding PromedioCola, StringFormat=N2}" Style="{StaticResource Value}"/>
                </StackPanel>
            </Border>

            <Border>
                <StackPanel>
                    <TextBlock Text="Peor Tiempo de Espera" Style="{StaticResource Label}"/>
                    <TextBlock Text="{Binding MaxEspera, StringFormat=N2}" Style="{StaticResource Value}" Foreground="Red"/>
                </StackPanel>
            </Border>

            <Border>
                <StackPanel>
                    <TextBlock Text="Cola Máxima (Pico)" Style="{StaticResource Label}"/>
                    <TextBlock Text="{Binding MaxCola}" Style="{StaticResource Value}"/>
                </StackPanel>
            </Border>

            <Border Visibility="Hidden"/>
        </UniformGrid>

        <GroupBox Grid.Row="2" Header="Detalle de Utilización por Caja">
            <DataGrid ItemsSource="{Binding ListaUtilizacion}" AutoGenerateColumns="False" 
                      CanUserAddRows="False" IsReadOnly="True" Margin="5">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID Caja" Binding="{Binding IdCaja}" Width="100"/>
                    <DataGridTextColumn Header="Porcentaje de Ocupación" Binding="{Binding Porcentaje, StringFormat={}{0:N2}%}" Width="*"/>
                    <DataGridTemplateColumn Header="Gráfico" Width="2*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <ProgressBar Value="{Binding Porcentaje}" Minimum="0" Maximum="100" Height="15" Foreground="#4CAF50"/>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>

        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
            <Button Content="Exportar a TXT" Command="{Binding ExportarTxtCommand}" 
                    Padding="15,8" Margin="0,0,10,0"/>

            <Button Content="Exportar a PDF" Command="{Binding ExportarPdfCommand}" 
                    Padding="15,8" Background="#D32F2F" Foreground="White" FontWeight="Bold"/>
        </StackPanel>
    </Grid>
</UserControl>