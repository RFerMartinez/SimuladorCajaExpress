<Window x:Class="CajaExpressSim.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:CajaExpressSim.ViewModels"
        xmlns:views="clr-namespace:CajaExpressSim.Views"
        Title="Caja Express Analytics 2025" Height="750" Width="1200"
        WindowStartupLocation="CenterScreen" 
        Background="{StaticResource ColorFondoPrincipal}">
    <Window.Resources>
        <DataTemplate DataType="{x:Type vm:ConfiguracionViewModel}">
            <views:ConfiguracionView/>
        </DataTemplate>
        <DataTemplate DataType="{x:Type vm:ResultadosViewModel}">
            <views:ResultadosView/>
        </DataTemplate>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="80"/>
        </Grid.RowDefinitions>

        <ContentControl Grid.Row="0" Content="{Binding VistaActual}" Margin="10"/>

        <Border Grid.Row="1" Background="{StaticResource ColorFondoTarjeta}" BorderBrush="{StaticResource ColorBordeTarjeta}" BorderThickness="0,1,0,0" Padding="20,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Button Grid.Column="0" Content="← Volver a Configuración" 
                        Command="{Binding VolverConfiguracionCommand}"
                        Background="Transparent" Foreground="{StaticResource ColorTextoSecundario}" BorderThickness="0"/>

                <StackPanel Grid.Column="1" HorizontalAlignment="Center" VerticalAlignment="Center">
                    <TextBlock Text="{Binding EstadoSimulacion}" Foreground="{StaticResource ColorAccionVerde}" FontWeight="SemiBold"/>
                    <TextBlock Text="PROCESANDO..." Foreground="{StaticResource ColorPeligro}" FontWeight="Bold" HorizontalAlignment="Center"
                               Visibility="{Binding EstaSimulando, Converter={StaticResource BooleanToVisibilityConverter}}"/>
                </StackPanel>

                <Button Grid.Column="2" Content="▶ INICIAR SIMULACIÓN" 
                        Command="{Binding IniciarSimulacionCommand}"
                        Style="{StaticResource BotonVerde}" FontSize="16" Width="250"/>
            </Grid>
        </Border>
    </Grid>
</Window>